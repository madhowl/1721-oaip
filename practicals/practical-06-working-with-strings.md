# Практическая работа 6: Работа со строками

## Цель работы

Научиться использовать методы и функции для обработки строк в Python, применять операции со строками для решения задач анализа текста, а также освоить форматирование строк.

## Теоретическая часть

Строка - это неизменяемая последовательность символов в Python. Со строками можно выполнять множество операций:

- Доступ к символам по индексу
- Срезы строк
- Конкатенация (соединение)
- Повторение
- Методы строк (поиск, замена, форматирование и т.д.)

```python
# Примеры базовых операций со строками
text = "Python"
print(text[0])      # 'P' - первый символ
print(text[-1])     # 'n' - последний символ
print(text[1:4])    # 'yth' - срез строки
print(text * 3)     # 'PythonPythonPython' - повторение
print("Hello, " + text)  # 'Hello, Python' - конкатенация
```

## Практические задания

### Задание 1: Анализ строки

Напишите программу, которая запрашивает у пользователя строку и выводит информацию о ней:
- Длину строки
- Первый и последний символ
- Середину строки (если длина нечетная - один символ, если четная - два символа)
- Строку в верхнем и нижнем регистре

**Пример выполнения:**
```
Введите строку: программирование
Длина строки: 15
Первый символ: п
Последний символ: е
Середина строки: р
Верхний регистр: ПРОГРАММИРОВАНИЕ
Нижний регистр: программирование
```

**Код для выполнения:**
```python
text = input("Введите строку: ")

print(f"Длина строки: {len(text)}")
print(f"Первый символ: {text[0]}")
print(f"Последний символ: {text[-1]}")

# Определяем середину строки
length = len(text)
if length % 2 == 1:
    # Нечетная длина - один символ в середине
    middle_index = length // 2
    middle = text[middle_index]
else:
    # Четная длина - два символа в середине
    middle_start = length // 2 - 1
    middle_end = length // 2 + 1
    middle = text[middle_start:middle_end]

print(f"Середина строки: {middle}")
print(f"Верхний регистр: {text.upper()}")
print(f"Нижний регистр: {text.lower()}")
```

---

### Задание 2: Подсчет символов

Создайте программу, которая подсчитывает количество гласных и согласных букв в строке. Программа должна игнорировать регистр и не учитывать пробелы и знаки препинания.

**Пример выполнения:**
```
Введите строку: Программирование на Python
Гласных: 9
Согласных: 13
```

**Код для выполнения:**
```python
text = input("Введите строку: ").lower()

vowels = "аеёиоуыэюяaeiou"
consonants = "бвгджзйклмнпрстфхцчшщbcdfghjklmnpqrstvwxyz"

vowel_count = 0
consonant_count = 0

for char in text:
    if char in vowels:
        vowel_count += 1
    elif char in consonants:
        consonant_count += 1

print(f"Гласных: {vowel_count}")
print(f"Согласных: {consonant_count}")
```

---

### Задание 3: Палиндром

Напишите программу, которая проверяет, является ли введенная строка палиндромом (читается одинаково в обоих направлениях, игнорируя пробелы, знаки препинания и регистр).

**Пример выполнения:**
```
Введите строку: А роза упала на лапу Азора
Это палиндром: True
```

**Код для выполнения:**
```python
text = input("Введите строку: ")
# Удаляем пробелы и переводим в нижний регистр
cleaned_text = ''.join(char.lower() for char in text if char.isalnum())

# Проверяем, равна ли строка своей перевернутой версии
is_palindrome = cleaned_text == cleaned_text[::-1]

print(f"Это палиндром: {is_palindrome}")
```

---

### Задание 4: Форматирование строк

Создайте программу, которая форматирует информацию о студенте в виде строки. Программа должна запрашивать у пользователя:
- Имя
- Возраст
- Специальность
- Средний балл

И выводить отформатированную информацию с помощью f-строк, метода format() и % форматирования.

**Пример выполнения:**
```
Введите имя: Иван
Введите возраст: 20
Введите специальность: Информатика
Введите средний балл: 4.75
Студент: Иван, 20 лет, специальность: Информатика, средний балл: 4.75
```

**Код для выполнения:**
```python
name = input("Введите имя: ")
age = int(input("Введите возраст: "))
specialty = input("Введите специальность: ")
gpa = float(input("Введите средний балл: "))

# Форматирование с помощью f-строк
formatted1 = f"Студент: {name}, {age} лет, специальность: {specialty}, средний балл: {gpa}"

# Форматирование с помощью метода format()
formatted2 = "Студент: {}, {} лет, специальность: {}, средний балл: {}".format(name, age, specialty, gpa)

# Форматирование с помощью %
formatted3 = "Студент: %s, %d лет, специальность: %s, средний балл: %.2f" % (name, age, specialty, gpa)

print(formatted1)
print(formatted2)
print(formatted3)
```

---

### Задание 5: Шифр Цезаря

Реализуйте шифр Цезаря - простой метод шифрования, который сдвигает каждый символ на определенное количество позиций в алфавите.

**Пример выполнения:**
```
Введите текст для шифрования: Привет
Введите сдвиг: 3
Зашифрованный текст: Субжхв
```

**Код для выполнения:**
```python
def caesar_cipher(text, shift):
    result = ""
    
    for char in text:
        if char.isalpha():
            # Определяем базовую позицию (для русского или английского)
            if 'а' <= char <= 'я':
                base = ord('а')
                encrypted_char = chr((ord(char) - base + shift) % 32 + base)
            elif 'А' <= char <= 'Я':
                base = ord('А')
                encrypted_char = chr((ord(char) - base + shift) % 32 + base)
            elif 'a' <= char <= 'z':
                base = ord('a')
                encrypted_char = chr((ord(char) - base + shift) % 26 + base)
            elif 'A' <= char <= 'Z':
                base = ord('A')
                encrypted_char = chr((ord(char) - base + shift) % 26 + base)
            else:
                encrypted_char = char
        else:
            encrypted_char = char
        
        result += encrypted_char
    
    return result

text = input("Введите текст для шифрования: ")
shift = int(input("Введите сдвиг: "))

encrypted_text = caesar_cipher(text, shift)
print(f"Зашифрованный текст: {encrypted_text}")

# Демонстрация дешифровки
decrypted_text = caesar_cipher(encrypted_text, -shift)
print(f"Расшифрованный текст: {decrypted_text}")
```

---

### Задание 6: Поиск и замена

Создайте программу, которая заменяет все вхождения одного слова в строке на другое. Программа должна учитывать регистронезависимость.

**Пример выполнения:**
```
Введите строку: Я люблю программирование на Python. Python - мой любимый язык.
Введите слово для замены: Python
Введите новое слово: Java
Результат: Я люблю программирование на Java. Java - мой любимый язык.
```

**Код для выполнения:**
```python
text = input("Введите строку: ")
old_word = input("Введите слово для замены: ")
new_word = input("Введите новое слово: ")

# Регистронезависимая замена
import re
pattern = re.compile(re.escape(old_word), re.IGNORECASE)
result = pattern.sub(new_word, text)

print(f"Результат: {result}")
```

---

### Задание 7: Статистика текста

Создайте программу, которая анализирует текст и выводит статистику:
- Количество слов
- Количество предложений
- Количество абзацев
- Самое длинное слово
- Частота встречаемости слов

**Пример выполнения:**
```
Введите текст: Python - это мощный язык программирования. Он прост в освоении. Python легко читается.
Количество слов: 11
Количество предложений: 3
Самое длинное слово: программирования
```

**Код для выполнения:**
```python
import re

text = input("Введите текст: ")

# Подсчет слов
words = re.findall(r'\b\w+\b', text)
word_count = len(words)

# Подсчет предложений (разделенных точкой, восклицательным или вопросительным знаком)
sentences = re.split(r'[.!?]+', text)
sentence_count = len([s for s in sentences if s.strip()])

# Подсчет абзацев (разделенных двойными переносами строк)
paragraphs = text.split('\n\n')
paragraph_count = len([p for p in paragraphs if p.strip()])

# Найти самое длинное слово
longest_word = ""
for word in words:
    if len(word) > len(longest_word):
        longest_word = word

# Подсчет частоты слов
word_freq = {}
for word in words:
    word_lower = word.lower()
    word_freq[word_lower] = word_freq.get(word_lower, 0) + 1

print(f"Количество слов: {word_count}")
print(f"Количество предложений: {sentence_count}")
print(f"Количество абзацев: {paragraph_count}")
print(f"Самое длинное слово: {longest_word}")

# Вывод частоты слов (топ 5)
print("Частота слов (топ 5):")
sorted_freq = sorted(word_freq.items(), key=lambda x: x[1], reverse=True)
for word, freq in sorted_freq[:5]:
    print(f"  {word}: {freq}")
```

---

### Задание 8: Валидация email

Создайте программу, которая проверяет, является ли строка корректным адресом электронной почты (упрощенная проверка).

**Пример выполнения:**
```
Введите email: user@example.com
Email корректен: True
```

**Код для выполнения:**
```python
def validate_email(email):
    # Проверяем, что в строке есть ровно один символ '@'
    if email.count('@') != 1:
        return False
    
    # Разбиваем на две части по символу '@'
    local_part, domain_part = email.split('@')
    
    # Проверяем, что обе части существуют и не пустые
    if not local_part or not domain_part:
        return False
    
    # Проверяем, что доменная часть содержит точку
    if '.' not in domain_part:
        return False
    
    # Проверяем, что после последней точки есть хотя бы 2 символа (домен верхнего уровня)
    tld = domain_part.split('.')[-1]
    if len(tld) < 2:
        return False
    
    # Проверяем, что локальная часть не начинается и не заканчивается точкой
    if local_part.startswith('.') or local_part.endswith('.'):
        return False
    
    # Проверяем, что нет двух точек подряд в локальной части
    if '..' in local_part:
        return False
    
    return True

email = input("Введите email: ")
is_valid = validate_email(email)
print(f"Email корректен: {is_valid}")
```

---

## Контрольные вопросы

1. Какие методы строк вы использовали в работе?
2. В чем разница между функциями upper() и lower()?
3. Как работает срез строки [start:end:step]?
4. Какие способы форматирования строк вы знаете?
5. Что такое регулярные выражения и для чего они используются?
6. Почему строки в Python являются неизменяемыми?
7. Как работает метод split() и для чего он используется?

## Вывод

В ходе этой практической работы были освоены различные методы работы со строками в Python. Были рассмотрены операции поиска, замены, форматирования и анализа текста. Умение эффективно работать со строками является важным навыком при решении задач обработки текстовой информации.
