# Практическая работа 9: Написание и использование функций

## Цель работы

Научиться создавать и использовать функции в Python, включая передачу параметров, возвращение значений, использование анонимных функций (лямбда-функций) и применение функций для решения задач обработки данных.

## Теоретическая часть

Функция - это именованный блок кода, который можно вызвать из другого места программы. Функции позволяют:
- Повторно использовать код
- Разбивать программу на логические блоки
- Упрощать отладку и тестирование

```python
# Пример простой функции
def greet(name):
    """Приветствует пользователя по имени"""
    return f"Привет, {name}!"

# Вызов функции
message = greet("Алексей")
print(message)  # Привет, Алексей!
```

## Практические задания

### Задание 1: Простая функция

Создайте функцию, которая принимает два числа и возвращает их сумму. Продемонстрируйте использование функции.

**Пример выполнения:**
```
Введите первое число: 5
Введите второе число: 3
Сумма: 8
```

**Код для выполнения:**
```python
def add_numbers(a, b):
    """Возвращает сумму двух чисел"""
    return a + b

num1 = int(input("Введите первое число: "))
num2 = int(input("Введите второе число: "))

result = add_numbers(num1, num2)
print(f"Сумма: {result}")
```

---

### Задание 2: Функция с параметрами по умолчанию

Создайте функцию, которая вычисляет площадь прямоугольника. Установите значение по умолчанию для одного из параметров (например, ширины).

**Пример выполнения:**
```
Введите длину: 10
Площадь (ширина по умолчанию): 50
Введите ширину: 7
Площадь: 70
```

**Код для выполнения:**
```python
def calculate_rectangle_area(length, width=5):
    """Вычисляет площадь прямоугольника"""
    return length * width

length = int(input("Введите длину: "))
area_default = calculate_rectangle_area(length)
print(f"Площадь (ширина по умолчанию): {area_default}")

width = int(input("Введите ширину: "))
area_custom = calculate_rectangle_area(length, width)
print(f"Площадь: {area_custom}")
```

---

### Задание 3: Функция с переменным числом аргументов

Создайте функцию, которая принимает произвольное количество чисел и возвращает их сумму и среднее значение.

**Пример выполнения:**
```
Введите числа через пробел: 1 2 3 4 5
Сумма: 15
Среднее: 3.0
```

**Код для выполнения:**
```python
def calculate_sum_and_average(*args):
    """Возвращает сумму и среднее значение чисел"""
    if not args:
        return 0, 0
    
    total = sum(args)
    average = total / len(args)
    return total, average

numbers_str = input("Введите числа через пробел: ")
numbers = [int(x) for x in numbers_str.split()]

total, average = calculate_sum_and_average(*numbers)
print(f"Сумма: {total}")
print(f"Среднее: {average}")
```

---

### Задание 4: Функция с именованными аргументами

Создайте функцию, которая принимает информацию о человеке (имя, возраст, город) и возвращает отформатированную строку. Используйте именованные аргументы.

**Пример выполнения:**
```
Информация о пользователе: Иван, 25 лет, город Москва
```

**Код для выполнения:**
```python
def format_person_info(name, age, city):
    """Форматирует информацию о человеке"""
    return f"{name}, {age} лет, город {city}"

# Использование именованных аргументов
info = format_person_info(name="Иван", age=25, city="Москва")
print(f"Информация о пользователе: {info}")
```

---

### Задание 5: Рекурсивная функция

Создайте рекурсивную функцию для вычисления факториала числа.

**Пример выполнения:**
```
Введите число: 5
Факториал 5 равен 120
```

**Код для выполнения:**
```python
def factorial(n):
    """Вычисляет факториал числа рекурсивно"""
    if n <= 1:
        return 1
    return n * factorial(n - 1)

number = int(input("Введите число: "))
result = factorial(number)
print(f"Факториал {number} равен {result}")
```

---

### Задание 6: Функция с документацией

Создайте функцию для проверки, является ли число простым, с полной документацией (docstring).

**Пример выполнения:**
```
Введите число: 17
Число 17 простое: True
```

**Код для выполнения:**
```python
def is_prime(n):
    """
    Проверяет, является ли число простым.
    
    Args:
        n (int): Число для проверки
        
    Returns:
        bool: True, если число простое, иначе False
        
    Examples:
        >>> is_prime(7)
        True
        >>> is_prime(8)
        False
    """
    if n < 2:
        return False
    for i in range(2, int(n**0.5) + 1):
        if n % i == 0:
            return False
    return True

number = int(input("Введите число: "))
result = is_prime(number)
print(f"Число {number} простое: {result}")
```

---

### Задание 7: Функция с вложенной функцией

Создайте функцию, которая содержит вложенную функцию для вычисления квадрата числа, а внешняя функция возводит результат в куб.

**Пример выполнения:**
```
Введите число: 3
Результат: 729 (сначала 3^2=9, потом 9^3=729)
```

**Код для выполнения:**
```python
def square_and_cube(n):
    """Возводит число в квадрат, затем результат в куб"""
    def square(x):
        """Возвращает квадрат числа"""
        return x * x
    
    squared = square(n)
    return squared ** 3

number = int(input("Введите число: "))
result = square_and_cube(number)
print(f"Результат: {result}")
```

---

### Задание 8: Лямбда-функции

Создайте несколько лямбда-функций для выполнения математических операций и продемонстрируйте их использование с функциями `map()`, `filter()`, `reduce()`.

**Пример выполнения:**
```
Исходный список: [1, 2, 3, 4, 5]
Удвоенные значения: [2, 4, 6, 8, 10]
Четные числа: [2, 4]
```

**Код для выполнения:**
```python
from functools import reduce

# Лямбда-функции
double = lambda x: x * 2
is_even = lambda x: x % 2 == 0
multiply = lambda x, y: x * y

numbers = [1, 2, 3, 4, 5]

# Использование map() с лямбда-функцией
doubled = list(map(double, numbers))
print(f"Удвоенные значения: {doubled}")

# Использование filter() с лямбда-функцией
even_numbers = list(filter(is_even, numbers))
print(f"Четные числа: {even_numbers}")

# Использование reduce() с лямбда-функцией
product = reduce(multiply, numbers)
print(f"Произведение всех чисел: {product}")
```

---

### Задание 9: Функция высшего порядка

Создайте функцию высшего порядка, которая принимает другую функцию и список значений, а затем применяет функцию к каждому элементу списка.

**Пример выполнения:**
```
Исходный список: [1, 2, 3, 4, 5]
Квадраты: [1, 4, 9, 16, 25]
Кубы: [1, 8, 27, 64, 125]
```

**Код для выполнения:**
```python
def apply_function(func, values):
    """Применяет функцию к каждому элементу списка"""
    return [func(x) for x in values]

def square(x):
    """Возвращает квадрат числа"""
    return x ** 2

def cube(x):
    """Возвращает куб числа"""
    return x ** 3

numbers = [1, 2, 3, 4, 5]

squares = apply_function(square, numbers)
cubes = apply_function(cube, numbers)

print(f"Квадраты: {squares}")
print(f"Кубы: {cubes}")
```

---

### Задание 10: Функция для обработки данных

Создайте набор функций для анализа списка оценок студентов:
- Вычисление среднего балла
- Поиск минимальной и максимальной оценки
- Определение количества отличников (оценка 5)

**Пример выполнения:**
```
Введите оценки через пробел: 5 4 3 5 5 2 4
Средний балл: 4.0
Минимальная оценка: 2
Максимальная оценка: 5
Количество отличников: 3
```

**Код для выполнения:**
```python
def calculate_average(grades):
    """Вычисляет средний балл"""
    return sum(grades) / len(grades) if grades else 0

def find_min_grade(grades):
    """Находит минимальную оценку"""
    return min(grades) if grades else 0

def find_max_grade(grades):
    """Находит максимальную оценку"""
    return max(grades) if grades else 0

def count_excellent_students(grades):
    """Считает количество отличников (оценка 5)"""
    return grades.count(5) if grades else 0

grades_str = input("Введите оценки через пробел: ")
grades = [int(x) for x in grades_str.split()]

print(f"Средний балл: {calculate_average(grades):.1f}")
print(f"Минимальная оценка: {find_min_grade(grades)}")
print(f"Максимальная оценка: {find_max_grade(grades)}")
print(f"Количество отличников: {count_excellent_students(grades)}")
```

---

### Задание 11: Функция с обработкой исключений

Создайте функцию для безопасного деления двух чисел, которая обрабатывает возможные исключения.

**Пример выполнения:**
```
Введите делимое: 10
Введите делитель: 0
Ошибка: деление на ноль!
```

**Код для выполнения:**
```python
def safe_divide(a, b):
    """Безопасное деление двух чисел"""
    try:
        result = a / b
        return result
    except ZeroDivisionError:
        print("Ошибка: деление на ноль!")
        return None
    except TypeError:
        print("Ошибка: неверный тип данных!")
        return None

dividend = float(input("Введите делимое: "))
divisor = float(input("Введите делитель: "))

result = safe_divide(dividend, divisor)
if result is not None:
    print(f"Результат деления: {result}")
```

---

### Задание 12: Комплексная задача - калькулятор

Создайте программу-калькулятор, которая использует функции для выполнения различных математических операций.

**Пример выполнения:**
```
1. Сложение
2. Вычитание
3. Умножение
4. Деление
Выберите операцию: 1
Введите первое число: 10
Введите второе число: 5
Результат: 15
```

**Код для выполнения:**
```python
def add(a, b):
    """Сложение двух чисел"""
    return a + b

def subtract(a, b):
    """Вычитание двух чисел"""
    return a - b

def multiply(a, b):
    """Умножение двух чисел"""
    return a * b

def divide(a, b):
    """Деление двух чисел"""
    if b == 0:
        raise ZeroDivisionError("Деление на ноль невозможно")
    return a / b

def calculator():
    """Программа-калькулятор"""
    operations = {
        1: ("Сложение", add),
        2: ("Вычитание", subtract),
        3: ("Умножение", multiply),
        4: ("Деление", divide)
    }
    
    print("Операции:")
    for key, (name, _) in operations.items():
        print(f"{key}. {name}")
    
    try:
        choice = int(input("Выберите операцию: "))
        if choice not in operations:
            print("Неверный выбор операции")
            return
        
        num1 = float(input("Введите первое число: "))
        num2 = float(input("Введите второе число: "))
        
        _, operation_func = operations[choice]
        result = operation_func(num1, num2)
        
        print(f"Результат: {result}")
    except ValueError:
        print("Ошибка: введите числовое значение")
    except ZeroDivisionError as e:
        print(f"Ошибка: {e}")

calculator()
```

---

## Контрольные вопросы

1. Что такое функция в Python?
2. Как объявить функцию?
3. Что такое параметры и аргументы функции?
4. Как вернуть значение из функции?
5. Что такое лямбда-функция?
6. В чем разница между `map()`, `filter()` и `reduce()`?
7. Что такое функция высшего порядка?
8. Как использовать параметры по умолчанию?
9. Как передать переменное число аргументов в функцию?
10. Зачем нужна документация функций (docstring)?

## Вывод

В ходе этой практической работы были освоены основы работы с функциями в Python. Были рассмотрены различные типы функций, способы передачи параметров, возвращения значений, а также использование анонимных функций и функций высшего порядка. Функции позволяют структурировать код, повышают его читаемость и переиспользуемость.
